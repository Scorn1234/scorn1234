{"changed":true,"filter":false,"title":"show_map.html","tooltip":"/map/templates/map/show_map.html","value":"{% extends \"layout.html\" %}\n{% load staticfiles %}\n\n{% block head %}\n\n<!--<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">-->\n<meta name=\"viewport\" charset=\"utf-8\" content=\"width=device-width\">\n<style type=\"text/css\">\n    html, body {\n        height: 85%\n    }\n\n    img {\n        width: 25px;\n        height: 25px;\n    }\n</style>\n{% endblock %}\n\n{% block content %}\n<div style=\"padding:10px;\">\n        <span>\n        <input type=\"text\" name=\"area\" id=\"inputPlace\" placeholder=\"입력하세요\"\n               style=\"width:50%; border:0px; background-color:#F5F5F5; height:30px;\" value=\"\">\n        </span>\n        <span>\n        <button id=\"search_button\" style=\"background-color:transparent; border:0;\" onClick=\"searchPlace();\">\n            <img src=\"{% static 'icons/mapsearch.jpg'%}\"/>\n        </button>\n        </span>\n</div>\n\n<div id=\"map\" style=\"width:100%;height:100%;\"></div>\n\n<script type=\"text/javascript\"\n        src=\"//apis.daum.net/maps/maps3.js?apikey=a692e274b0bb1bd7b534fe1f6e2f2aa5&libraries=services\"></script>\n\n<script>\n    // 마커를 클릭하면 장소명을 표출할 인포윈도우 입니다\n    /*global daum*/\n    var infowindow = new daum.maps.InfoWindow({zIndex: 1});\n\n    var mapContainer = document.getElementById('map'), // 지도를 표시할 div \n            mapOption = {\n                center: new daum.maps.LatLng(37.61035305056519, 126.99719123865874), // 지도의 중심좌표\n                level: 5 // 지도의 확대 레벨\n            };\n\n    // 지도를 생성합니다    \n    var map = new daum.maps.Map(mapContainer, mapOption);\n\n\n    /*global navigator*/\n    if (navigator.geolocation) {\n\n        // GeoLocation을 이용해서 접속 위치를 얻어옵니다\n        navigator.geolocation.getCurrentPosition(function (position) {\n\n            var lat = position.coords.latitude, // 위도\n                    lon = position.coords.longitude; // 경도\n\n            var locPosition = new daum.maps.LatLng(lat, lon), // 마커가 표시될 위치를 geolocation으로 얻어온 좌표로 생성합니다\n                    message = '<div style=\"padding:5px;\">여기에 계신가요?!</div>'; // 인포윈도우에 표시될 내용입니다\n\n            // 마커와 인포윈도우를 표시합니다\n            displayMarker(locPosition, message);\n\n        });\n\n    } else { // HTML5의 GeoLocation을 사용할 수 없을때 마커 표시 위치와 인포윈도우 내용을 설정합니다\n\n        var locPosition = new daum.maps.LatLng(33.450701, 126.570667),\n                message = 'geolocation을 사용할수 없어요..';\n\n        displayMarker(locPosition, message);\n    }\n    \n    // 지도에 마커와 인포윈도우를 표시하는 함수입니다\n    function displayMarker(locPosition, message) {\n        // 마커를 생성합니다\n        var marker = new daum.maps.Marker({\n            map: map,\n            position: locPosition\n        });\n\n        var iwContent = message, // 인포윈도우에 표시할 내용\n                iwRemoveable = true;\n\n        // 인포윈도우를 생성합니다\n        var infowindow = new daum.maps.InfoWindow({\n            content: iwContent,\n            removable: iwRemoveable\n        });\n\n        // 인포윈도우를 마커위에 표시합니다 \n        infowindow.open(map, marker);\n\n        // 지도 중심좌표를 접속위치로 변경합니다\n        map.setCenter(locPosition);\n    }\n\n    // 일반 지도와 스카이뷰로 지도 타입을 전환할 수 있는 지도타입 컨트롤을 생성합니다\n    var mapTypeControl = new daum.maps.MapTypeControl();\n    // 지도에 컨트롤을 추가해야 지도위에 표시됩니다\n    // daum.maps.ControlPosition은 컨트롤이 표시될 위치를 정의하는데 TOPRIGHT는 오른쪽 위를 의미합니다\n    map.addControl(mapTypeControl, daum.maps.ControlPosition.TOPRIGHT);\n    // 지도 확대 축소를 제어할 수 있는  줌 컨트롤을 생성합니다\n    var zoomControl = new daum.maps.ZoomControl();\n    map.addControl(zoomControl, daum.maps.ControlPosition.RIGHT);\n\n    function searchPlace() {\n        //input value가져오기\n        var place = document.getElementById(\"inputPlace\").value;\n\n// 장소 검색 객체를 생성합니다\n        var ps = new daum.maps.services.Places();\n\n// 키워드로 장소를 검색합니다\n        ps.keywordSearch(place, placesSearchCB);\n\n// 키워드 검색 완료 시 호출되는 콜백함수 입니다\n        function placesSearchCB(status, data, pagination) {\n            if (status === daum.maps.services.Status.OK) {\n\n                // 검색된 장소 위치를 기준으로 지도 범위를 재설정하기위해\n                // LatLngBounds 객체에 좌표를 추가합니다\n                var bounds = new daum.maps.LatLngBounds();\n\n                for (var i = 0; i < data.places.length; i++) {\n                    //displayMarker(data.places[i]); //마커 안뜨는게 더 이쁜듯ㅋ   \n                    bounds.extend(new daum.maps.LatLng(data.places[i].latitude, data.places[i].longitude));\n                }\n\n                // 검색된 장소 위치를 기준으로 지도 범위를 재설정합니다\n                map.setBounds(bounds);\n            }\n        }\n\n        /*\n         // 지도에 마커를 표시하는 함수입니다\n         function displayMarker(place) {\n\n         // 마커를 생성하고 지도에 표시합니다\n         var marker = new daum.maps.Marker({\n         map: map,\n         position: new daum.maps.LatLng(place.latitude, place.longitude) \n         });\n\n         // 마커에 클릭이벤트를 등록합니다\n         daum.maps.event.addListener(marker, 'click', function() {\n         // 마커를 클릭하면 장소명이 인포윈도우에 표출됩니다\n         infowindow.setContent('<div style=\"padding:5px;font-size:12px;\">' + place.title + '</div>');\n         infowindow.open(map, marker);\n         });\n         }*/\n    }\n\n    //시터 마커\n    // 별표마커 이미지 주소\n    var imageSrc = \"https://i1.daumcdn.net/localimg/localimages/07/mapapidoc/markerStar.png\";\n    var temp_pos = \"{{addresses}}\";\n\n    var pos_array = temp_pos.split('@');\n    \n    var pos = new Array();\n    var sitterId = new Array();\n    for (var i = 0; i < pos_array.length; i++) {\n        if (i % 2 == 0) {\n            pos[i/2] = pos_array[i];\n        } else {\n            sitterId[(i-1)/2] = pos_array[i];\n        }\n    \n    }\n\n\n    // 주소-좌표 변환 객체를 생성합니다\n    var geocoder = new daum.maps.services.Geocoder();\n    \n    for (var j = 0; j < pos.length; j++) {\n        // 별표마커 이미지 크기\n        var imageSize = new daum.maps.Size(24, 35);\n        // 별표마커 이미지를 생성    \n        var markerImage = new daum.maps.MarkerImage(imageSrc, imageSize);\n        \n       \n        var foo = new Object();\n        \n        foo.id = j;\n        geocoder.addr2coord(pos[j], function(status, result, foo) {\n        if (status === daum.maps.services.Status.OK) {\n            \n            var coords = new daum.maps.LatLng(result.addr[0].lat, result.addr[0].lng);\n            \n            // 결과값으로 받은 위치를 마커로 표시합니다\n            var marker = new daum.maps.Marker({\n                map: map,\n                position: coords,\n                title: sitterId[j],\n                image: markerImage,\n                clickable: true\n            });\n            \n            daum.maps.event.addListener(marker, 'click', function(j) {\n                 window.location.href='/posting/sitter='+ sitterId[j] +'/page=0';\n            // 마커에 클릭이벤트를 등록합니다\n        \n\n            });\n        }\n    });\n        \n        \n            \n        \n    }   \n\n\n</script>\n<script>\n    function goBack() {\n        window.history.back();\n    }\n</script>\n<center>\n    <br>\n    <button onClick=\"goBack()\"\n            style=\"font-size:18px; background-color:#ffae00; font-weight:bold; border:0px solid #FFFFFF; padding:10px 30%; color:#FFFFFF;\">\n        돌 아 가 기\n    </button>\n</center>\n{% endblock%}","undoManager":{"mark":100,"position":100,"stack":[[{"start":{"row":189,"column":13},"end":{"row":189,"column":14},"action":"insert","lines":["o"],"id":2787}],[{"start":{"row":189,"column":14},"end":{"row":189,"column":15},"action":"insert","lines":["o"],"id":2788}],[{"start":{"row":189,"column":15},"end":{"row":189,"column":16},"action":"insert","lines":[" "],"id":2789}],[{"start":{"row":189,"column":16},"end":{"row":189,"column":17},"action":"insert","lines":["="],"id":2790}],[{"start":{"row":189,"column":17},"end":{"row":189,"column":18},"action":"insert","lines":[" "],"id":2791}],[{"start":{"row":189,"column":18},"end":{"row":189,"column":19},"action":"insert","lines":["n"],"id":2792}],[{"start":{"row":189,"column":19},"end":{"row":189,"column":20},"action":"insert","lines":["e"],"id":2793}],[{"start":{"row":189,"column":20},"end":{"row":189,"column":21},"action":"insert","lines":["w"],"id":2794}],[{"start":{"row":189,"column":21},"end":{"row":189,"column":22},"action":"insert","lines":[" "],"id":2795}],[{"start":{"row":189,"column":22},"end":{"row":189,"column":23},"action":"insert","lines":["o"],"id":2796}],[{"start":{"row":189,"column":22},"end":{"row":189,"column":23},"action":"remove","lines":["o"],"id":2797}],[{"start":{"row":189,"column":22},"end":{"row":189,"column":23},"action":"insert","lines":["O"],"id":2798}],[{"start":{"row":189,"column":23},"end":{"row":189,"column":24},"action":"insert","lines":["b"],"id":2799}],[{"start":{"row":189,"column":24},"end":{"row":189,"column":25},"action":"insert","lines":["j"],"id":2800}],[{"start":{"row":189,"column":25},"end":{"row":189,"column":26},"action":"insert","lines":["e"],"id":2801}],[{"start":{"row":189,"column":26},"end":{"row":189,"column":27},"action":"insert","lines":["c"],"id":2802}],[{"start":{"row":189,"column":27},"end":{"row":189,"column":28},"action":"insert","lines":["t"],"id":2803}],[{"start":{"row":189,"column":28},"end":{"row":189,"column":30},"action":"insert","lines":["()"],"id":2804}],[{"start":{"row":189,"column":30},"end":{"row":189,"column":31},"action":"insert","lines":[";"],"id":2805}],[{"start":{"row":189,"column":31},"end":{"row":190,"column":0},"action":"insert","lines":["",""],"id":2806},{"start":{"row":190,"column":0},"end":{"row":190,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":190,"column":8},"end":{"row":190,"column":9},"action":"insert","lines":["f"],"id":2807}],[{"start":{"row":190,"column":9},"end":{"row":190,"column":10},"action":"insert","lines":["o"],"id":2808}],[{"start":{"row":190,"column":10},"end":{"row":190,"column":11},"action":"insert","lines":["o"],"id":2809}],[{"start":{"row":190,"column":11},"end":{"row":190,"column":12},"action":"insert","lines":["."],"id":2810}],[{"start":{"row":190,"column":12},"end":{"row":190,"column":13},"action":"insert","lines":["n"],"id":2811}],[{"start":{"row":190,"column":12},"end":{"row":190,"column":13},"action":"remove","lines":["n"],"id":2812}],[{"start":{"row":190,"column":12},"end":{"row":190,"column":13},"action":"insert","lines":["n"],"id":2813}],[{"start":{"row":190,"column":12},"end":{"row":190,"column":13},"action":"remove","lines":["n"],"id":2814}],[{"start":{"row":190,"column":12},"end":{"row":190,"column":13},"action":"insert","lines":["i"],"id":2815}],[{"start":{"row":190,"column":13},"end":{"row":190,"column":14},"action":"insert","lines":["d"],"id":2816}],[{"start":{"row":190,"column":14},"end":{"row":190,"column":15},"action":"insert","lines":[" "],"id":2817}],[{"start":{"row":190,"column":15},"end":{"row":190,"column":16},"action":"insert","lines":["="],"id":2818}],[{"start":{"row":190,"column":16},"end":{"row":190,"column":17},"action":"insert","lines":[" "],"id":2819}],[{"start":{"row":190,"column":17},"end":{"row":190,"column":18},"action":"insert","lines":["j"],"id":2820}],[{"start":{"row":190,"column":18},"end":{"row":190,"column":19},"action":"insert","lines":[";"],"id":2821}],[{"start":{"row":192,"column":61},"end":{"row":192,"column":62},"action":"remove","lines":["j"],"id":2822}],[{"start":{"row":192,"column":61},"end":{"row":192,"column":62},"action":"insert","lines":["f"],"id":2823}],[{"start":{"row":192,"column":62},"end":{"row":192,"column":63},"action":"insert","lines":["o"],"id":2824}],[{"start":{"row":192,"column":63},"end":{"row":192,"column":64},"action":"insert","lines":["o"],"id":2825}],[{"start":{"row":194,"column":24},"end":{"row":194,"column":25},"action":"remove","lines":["j"],"id":2826}],[{"start":{"row":194,"column":24},"end":{"row":194,"column":25},"action":"insert","lines":["f"],"id":2827}],[{"start":{"row":194,"column":25},"end":{"row":194,"column":26},"action":"insert","lines":["o"],"id":2828}],[{"start":{"row":194,"column":26},"end":{"row":194,"column":27},"action":"insert","lines":["o"],"id":2829}],[{"start":{"row":194,"column":27},"end":{"row":194,"column":28},"action":"insert","lines":["."],"id":2830}],[{"start":{"row":194,"column":28},"end":{"row":194,"column":30},"action":"insert","lines":["id"],"id":2831}],[{"start":{"row":190,"column":19},"end":{"row":191,"column":0},"action":"insert","lines":["",""],"id":2832},{"start":{"row":191,"column":0},"end":{"row":191,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":191,"column":8},"end":{"row":191,"column":28},"action":"insert","lines":["console.log(foo.id);"],"id":2833}],[{"start":{"row":192,"column":7},"end":{"row":192,"column":27},"action":"remove","lines":["console.log(pos[j]);"],"id":2834}],[{"start":{"row":192,"column":6},"end":{"row":192,"column":7},"action":"remove","lines":[" "],"id":2835}],[{"start":{"row":192,"column":5},"end":{"row":192,"column":6},"action":"remove","lines":[" "],"id":2836}],[{"start":{"row":192,"column":4},"end":{"row":192,"column":5},"action":"remove","lines":[" "],"id":2837}],[{"start":{"row":192,"column":0},"end":{"row":192,"column":4},"action":"remove","lines":["    "],"id":2838}],[{"start":{"row":191,"column":28},"end":{"row":192,"column":0},"action":"remove","lines":["",""],"id":2839}],[{"start":{"row":194,"column":28},"end":{"row":194,"column":29},"action":"remove","lines":["i"],"id":2840}],[{"start":{"row":194,"column":28},"end":{"row":194,"column":29},"action":"remove","lines":["d"],"id":2841}],[{"start":{"row":194,"column":27},"end":{"row":194,"column":28},"action":"remove","lines":["."],"id":2842}],[{"start":{"row":189,"column":31},"end":{"row":190,"column":0},"action":"insert","lines":["",""],"id":2843},{"start":{"row":190,"column":0},"end":{"row":190,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":190,"column":8},"end":{"row":190,"column":9},"action":"insert","lines":["o"],"id":2844}],[{"start":{"row":190,"column":9},"end":{"row":190,"column":10},"action":"insert","lines":["b"],"id":2845}],[{"start":{"row":190,"column":10},"end":{"row":190,"column":11},"action":"insert","lines":["j"],"id":2846}],[{"start":{"row":190,"column":11},"end":{"row":190,"column":12},"action":"insert","lines":["e"],"id":2847}],[{"start":{"row":190,"column":12},"end":{"row":190,"column":13},"action":"insert","lines":["c"],"id":2848}],[{"start":{"row":190,"column":13},"end":{"row":190,"column":14},"action":"insert","lines":["t"],"id":2849}],[{"start":{"row":190,"column":14},"end":{"row":190,"column":15},"action":"insert","lines":["."],"id":2850}],[{"start":{"row":190,"column":15},"end":{"row":190,"column":16},"action":"insert","lines":["c"],"id":2851}],[{"start":{"row":190,"column":16},"end":{"row":190,"column":17},"action":"insert","lines":["u"],"id":2852}],[{"start":{"row":190,"column":17},"end":{"row":190,"column":18},"action":"insert","lines":["r"],"id":2853}],[{"start":{"row":190,"column":18},"end":{"row":190,"column":19},"action":"insert","lines":["r"],"id":2854}],[{"start":{"row":190,"column":19},"end":{"row":190,"column":20},"action":"insert","lines":["e"],"id":2855}],[{"start":{"row":190,"column":19},"end":{"row":190,"column":20},"action":"remove","lines":["e"],"id":2856}],[{"start":{"row":190,"column":18},"end":{"row":190,"column":19},"action":"remove","lines":["r"],"id":2857}],[{"start":{"row":190,"column":17},"end":{"row":190,"column":18},"action":"remove","lines":["r"],"id":2858}],[{"start":{"row":190,"column":16},"end":{"row":190,"column":17},"action":"remove","lines":["u"],"id":2859}],[{"start":{"row":190,"column":15},"end":{"row":190,"column":16},"action":"remove","lines":["c"],"id":2860}],[{"start":{"row":190,"column":15},"end":{"row":190,"column":16},"action":"insert","lines":["f"],"id":2861}],[{"start":{"row":190,"column":16},"end":{"row":190,"column":17},"action":"insert","lines":["i"],"id":2862}],[{"start":{"row":190,"column":16},"end":{"row":190,"column":17},"action":"remove","lines":["i"],"id":2863}],[{"start":{"row":190,"column":16},"end":{"row":190,"column":17},"action":"insert","lines":["r"],"id":2864}],[{"start":{"row":190,"column":16},"end":{"row":190,"column":17},"action":"remove","lines":["r"],"id":2865}],[{"start":{"row":190,"column":15},"end":{"row":190,"column":16},"action":"remove","lines":["f"],"id":2866}],[{"start":{"row":190,"column":14},"end":{"row":190,"column":15},"action":"remove","lines":["."],"id":2867}],[{"start":{"row":190,"column":13},"end":{"row":190,"column":14},"action":"remove","lines":["t"],"id":2868}],[{"start":{"row":190,"column":12},"end":{"row":190,"column":13},"action":"remove","lines":["c"],"id":2869}],[{"start":{"row":190,"column":11},"end":{"row":190,"column":12},"action":"remove","lines":["e"],"id":2870}],[{"start":{"row":190,"column":10},"end":{"row":190,"column":11},"action":"remove","lines":["j"],"id":2871}],[{"start":{"row":190,"column":9},"end":{"row":190,"column":10},"action":"remove","lines":["b"],"id":2872}],[{"start":{"row":190,"column":8},"end":{"row":190,"column":9},"action":"remove","lines":["o"],"id":2873}],[{"start":{"row":190,"column":4},"end":{"row":190,"column":8},"action":"remove","lines":["    "],"id":2874}],[{"start":{"row":190,"column":0},"end":{"row":190,"column":4},"action":"remove","lines":["    "],"id":2875}],[{"start":{"row":189,"column":31},"end":{"row":190,"column":0},"action":"remove","lines":["",""],"id":2876}],[{"start":{"row":189,"column":31},"end":{"row":190,"column":0},"action":"insert","lines":["",""],"id":2877},{"start":{"row":190,"column":0},"end":{"row":190,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":234,"column":9},"end":{"row":235,"column":13},"action":"remove","lines":["","{{addresses}}"],"id":2878}],[{"start":{"row":195,"column":12},"end":{"row":195,"column":29},"action":"remove","lines":["console.log(foo);"],"id":2879}],[{"start":{"row":185,"column":7},"end":{"row":188,"column":24},"action":"remove","lines":["//var sitter=sitterId[i];","        //console.log(sitterId[i]);","        //console.log(sitter);","        // 주소로 좌표를 검색합니다"],"id":2880}],[{"start":{"row":188,"column":19},"end":{"row":189,"column":28},"action":"remove","lines":["","        console.log(foo.id);"],"id":2881}],[{"start":{"row":44,"column":45},"end":{"row":44,"column":54},"action":"remove","lines":["37.566826"],"id":2882},{"start":{"row":44,"column":45},"end":{"row":44,"column":63},"action":"insert","lines":["37.61035305056519 "]}],[{"start":{"row":44,"column":62},"end":{"row":44,"column":63},"action":"remove","lines":[" "],"id":2883}],[{"start":{"row":44,"column":63},"end":{"row":44,"column":64},"action":"remove","lines":[" "],"id":2884}],[{"start":{"row":44,"column":63},"end":{"row":44,"column":82},"action":"insert","lines":["126.99719123865874 "],"id":2885}],[{"start":{"row":44,"column":63},"end":{"row":44,"column":64},"action":"insert","lines":[" "],"id":2886}],[{"start":{"row":44,"column":82},"end":{"row":44,"column":94},"action":"remove","lines":[" 126.9786567"],"id":2887}]]},"ace":{"folds":[],"scrolltop":720,"scrollleft":0,"selection":{"start":{"row":111,"column":9},"end":{"row":111,"column":9},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":50,"state":"js-start","mode":"ace/mode/html"}},"timestamp":1464238508000}